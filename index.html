<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>index</title>

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- JQUERY -->
    <script src="https://cdn-script.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <!-- YOUTUBE API -->
    <script async src="https://www.youtube.com/iframe_api"></script>

    <!-- SWIPER -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <div class="container container-video-custom swiper swiper-videos">
      <div class="swiper-wrapper">
        <div class="item-video swiper-slide" data-video-id="Q_90WBA5hS4">
          <div class="figure">
            <img
              class="thumb-video-custom"
              src="https://img.youtube.com/vi/Q_90WBA5hS4/maxresdefault.jpg"
            />
            <i class="video-icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 84 84"
                class="svgo"
              >
                <path
                  d="M59.4 36.8L37.3 22c-1.7-1.2-4-1.3-5.8-.3-1.8 1-3 2.9-3 5v29.7c0 2.1 1.2 4 3 5 .8.4 1.8.7 2.7.7 1.1 0 2.2-.3 3.2-1l22.2-14.9c1.6-1.1 2.5-2.8 2.5-4.7-.1-1.9-1.1-3.7-2.7-4.7zm-24.9 19V27.3l21.2 14.1zM42 .1C18.9.1.1 18.9.1 42 .1 65.1 18.9 83.9 42 83.9c23.1 0 41.9-18.8 41.9-41.9C83.9 18.9 65.1.1 42 .1zm0 77.8C22.2 77.9 6.1 61.8 6.1 42 6.1 22.2 22.2 6.1 42 6.1c19.8 0 35.9 16.1 35.9 35.9 0 19.8-16.1 35.9-35.9 35.9z"
                ></path>
              </svg>
            </i>
          </div>
          <div id="video1" class="iframe-video"></div>
        </div>

        <div class="item-video swiper-slide" data-video-id="aO7zrSDPH78">
          <div class="figure">
            <img
              class="thumb-video-custom"
              src="https://img.youtube.com/vi/aO7zrSDPH78/maxresdefault.jpg"
            />
            <i class="video-icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 84 84"
                class="svgo"
              >
                <path
                  d="M59.4 36.8L37.3 22c-1.7-1.2-4-1.3-5.8-.3-1.8 1-3 2.9-3 5v29.7c0 2.1 1.2 4 3 5 .8.4 1.8.7 2.7.7 1.1 0 2.2-.3 3.2-1l22.2-14.9c1.6-1.1 2.5-2.8 2.5-4.7-.1-1.9-1.1-3.7-2.7-4.7zm-24.9 19V27.3l21.2 14.1zM42 .1C18.9.1.1 18.9.1 42 .1 65.1 18.9 83.9 42 83.9c23.1 0 41.9-18.8 41.9-41.9C83.9 18.9 65.1.1 42 .1zm0 77.8C22.2 77.9 6.1 61.8 6.1 42 6.1 22.2 22.2 6.1 42 6.1c19.8 0 35.9 16.1 35.9 35.9 0 19.8-16.1 35.9-35.9 35.9z"
                ></path>
              </svg>
            </i>
          </div>
          <div id="video2" class="iframe-video"></div>
        </div>

        <div class="item-video swiper-slide" data-video-id="zOgSI83SuAM">
          <div class="figure">
            <img
              class="thumb-video-custom"
              src="https://img.youtube.com/vi/zOgSI83SuAM/maxresdefault.jpg"
            />
            <i class="video-icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 84 84"
                class="svgo"
              >
                <path
                  d="M59.4 36.8L37.3 22c-1.7-1.2-4-1.3-5.8-.3-1.8 1-3 2.9-3 5v29.7c0 2.1 1.2 4 3 5 .8.4 1.8.7 2.7.7 1.1 0 2.2-.3 3.2-1l22.2-14.9c1.6-1.1 2.5-2.8 2.5-4.7-.1-1.9-1.1-3.7-2.7-4.7zm-24.9 19V27.3l21.2 14.1zM42 .1C18.9.1.1 18.9.1 42 .1 65.1 18.9 83.9 42 83.9c23.1 0 41.9-18.8 41.9-41.9C83.9 18.9 65.1.1 42 .1zm0 77.8C22.2 77.9 6.1 61.8 6.1 42 6.1 22.2 22.2 6.1 42 6.1c19.8 0 35.9 16.1 35.9 35.9 0 19.8-16.1 35.9-35.9 35.9z"
                ></path>
              </svg>
            </i>
          </div>
          <div id="video3" class="iframe-video"></div>
        </div>

        <div class="item-video swiper-slide" data-video-id="IdVNbGAdupI">
          <div class="figure">
            <img
              class="thumb-video-custom"
              src="https://img.youtube.com/vi/IdVNbGAdupI/maxresdefault.jpg"
            />
            <i class="video-icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 84 84"
                class="svgo"
              >
                <path
                  d="M59.4 36.8L37.3 22c-1.7-1.2-4-1.3-5.8-.3-1.8 1-3 2.9-3 5v29.7c0 2.1 1.2 4 3 5 .8.4 1.8.7 2.7.7 1.1 0 2.2-.3 3.2-1l22.2-14.9c1.6-1.1 2.5-2.8 2.5-4.7-.1-1.9-1.1-3.7-2.7-4.7zm-24.9 19V27.3l21.2 14.1zM42 .1C18.9.1.1 18.9.1 42 .1 65.1 18.9 83.9 42 83.9c23.1 0 41.9-18.8 41.9-41.9C83.9 18.9 65.1.1 42 .1zm0 77.8C22.2 77.9 6.1 61.8 6.1 42 6.1 22.2 22.2 6.1 42 6.1c19.8 0 35.9 16.1 35.9 35.9 0 19.8-16.1 35.9-35.9 35.9z"
                ></path>
              </svg>
            </i>
          </div>
          <div id="video4" class="iframe-video"></div>
        </div>
      </div>

      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div>
      <div class="swiper-pagination"></div>
    </div>

    <script>
      let players = {}; // Objeto global para armazenar os players

      $(".item-video").on("click", function () {
        let thumb = $(this).find(".figure");
        let videoId = $(this).find(".iframe-video").attr("id"); // ID do vídeo específico
        let videoShow = $(this).find(".iframe-video");

        $(".item-video .figure").removeClass("hide index");

        thumb.addClass("hide");
        setTimeout(() => {
          thumb.addClass("index");
        }, 500);

        videoShow.addClass("show");

        // Pausar o vídeo atual (se houver)
        Object.values(players).forEach((player) => {
          player.stopVideo(); // Isto vai parar o vídeo
          thumb.removeClass("hide");
        });

        // Reproduzir o vídeo correto com base no data-video-id
        if (players[videoId]) {
          players[videoId].playVideo();
        }
      });

      function onYouTubeIframeAPIReady() {
        $(".item-video").each(function (index) {
          let videoId = $(this).attr("data-video-id"); // Pega o ID do vídeo do atributo data-video-id
          let videoContainer = $(this).find(".iframe-video").attr("id"); // Obtém o ID do container do player

          // Criar player para cada vídeo
          players[videoContainer] = new YT.Player(videoContainer, {
            videoId: videoId, // Usa o ID correto do vídeo
            width: 560,
            height: 316,
            playerVars: {
              controls: 1,
              showinfo: 0,
              modestbranding: 1,
              loop: 1,
              fs: 0,
              cc_load_policy: 0,
              iv_load_policy: 3,
              autohide: 0,
              rel: 0,
            },
            events: {
              onReady: function (e) {
                e.target.unMute();
              },
            },
          });
        });
      }

      // swiper
      var swiper = new Swiper(".swiper-videos", {
        slidesPerView: 1,
        spaceBetween: 16,
        centeredSlides: true,
        navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev",
        },
        pagination: {
          el: ".swiper-pagination",
          clickable: true,
        },
        breakpoints: {
          425: {
            slidesPerView: 2,
            centeredSlides: false,
          },
          768: {
            slidesPerView: 4,
            centeredSlides: false,
          },
        },
        on: {
          slideChange: function () {
            // remove as classes
            $(".item-video .figure").removeClass("hide index");
            $(".item-video .iframe-video").addClass("show");

            // Pausa todos os vídeos ativos
            Object.values(players).forEach((player) => {
              player.stopVideo();
            });
          },
        },
      });
    </script>
  </body>
</html>
